<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>Raliegh Greenways</title>

    <!-- Bootstrap core CSS -->
   <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap-theme.min.css">
<link href='//api.tiles.mapbox.com/mapbox.js/v1.4.2/mapbox.css' rel='stylesheet' />


    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <style>#map { width:1100px; height:500px; }</style>
    <style type='text/css'>
    .my-legend .legend-title {
      text-align: left;
      margin-bottom: 8px;
      font-weight: bold;
      font-size: 90%;
      }
    .my-legend .legend-scale ul {
      margin: 0;
      padding: 0;
      float: left;
      list-style: none;
      }
    .my-legend .legend-scale ul li {
      display: block;
      float: left;
      width: 50px;
      margin-bottom: 6px;
      text-align: center;
      font-size: 80%;
      list-style: none;
      }
    .my-legend ul.legend-labels li span {
      display: block;
      float: left;
      height: 15px;
      width: 50px;
      }
    .my-legend .legend-source {
      font-size: 70%;
      color: #999;
      clear: both;
      }
    .my-legend a {
      color: #777;
      }
  </style>
  </head>

  <body>

    <div class="container">

      <!-- Static navbar -->
      <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Explore Raleigh</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Trails</a></li>
            <li><a href="#">Parking</a></li>
            <li><a href="#dist">Distance</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="./">Default</a></li>
            <li><a href="../navbar-static-top/">Static top</a></li>
            <li><a href="../navbar-fixed-top/">Fixed top</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>

      <!-- Main component for a primary marketing message or call to action -->
      <div class="jumbotron">
        <h1>EXPLORE RALEIGH</h1>
        <p>Leave the car at home and see all that Raleigh has to offer with its greenways.</p>
        <p>
          <a class="btn btn-lg btn-primary" href="../../components/#navbar" role="button">Find a Greenway &raquo;</a>
        </p>
      </div>

    <div id='map' class='dark'></div>
    <br />
    <div id='dist'><h1>Distance Graph (Miles)</h1><div><br />
<div id="chart"></div>
  

<div id='legend-content' style='display: none;'>
  <div class='my-legend'>
  <div class='legend-title'>Greenways</div>
  <div><span style='color:#00CC00; font-size:16px;'><strong>&mdash;</strong> Existing</div></br>
  <div><span style='color:#FF0000; font-size:16px;'><strong>&mdash;</strong> Under Construction</div></br>
  <div class='legend-scale'>
    <ul class='legend-labels'>
      <li><span style='background:#F1EEF6;'></span>0 - 20%</li>
      <li><span style='background:#BDC9E1;'></span>40%</li>
      <li><span style='background:#74A9CF;'></span>60%</li>
      <li><span style='background:#2B8CBE;'></span>80%</li>
      <li><span style='background:#045A8D;'></span>100%</li>
    </ul>
  </div>
  <div class='legend-source'>Source: <a href="#link to source">City of Raleigh</a></div>
  </div>
    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
     <script src='//api.tiles.mapbox.com/mapbox.js/v1.4.2/mapbox.js'></script>
     <script src="http://d3js.org/d3.v2.min.js"></script>

     <script type="text/javascript">

        var map = L.mapbox.map('map', 'ctwhite.gak10i1l');


//Style setup
       function greenwayStyle(feature) {
          switch (feature.properties.STATUS) {
            case 'Existing': return {color: "#00CC00","weight": 2,"opacity": 0.65};
            case 'Under Construction': return {color: "#FF0000","weight": 2,"opacity": 0.65, dashArray: '3'};
          }
      }

//Popup set up
      function greenwayPopUp(feature, layer) {
  layer.bindPopup('<h2><strong>Info</strong></h2><strong>Trail Name: </strong>' + feature.properties.TRAIL_NAME + '<br />' + '<strong>Status: </strong>' + feature.properties.STATUS);
}


$.ajax({
    type: "GET",
    url: 'http://cwhite911.github.io/RaleighGreenways/dist/dist/data/trails.geojson',
    dataType: 'json',
    success: function (response) {

        var greenway = L.geoJson(response, {
            style: greenwayStyle,
            onEachFeature: greenwayPopUp
        }).addTo(map);
    }
});

        //setup parking geojson
       
$.ajax({
    type: "GET",
    url: 'http://cwhite911.github.io/RaleighGreenways/dist/dist/data/parking.geojson',
    dataType: 'json',
    success: function (response) {

        var parking = L.geoJson(response, {
           
        }).addTo(map);
    }
});
//         var trails = L.mapbox.markerLayer()
//     .addTo(map);

// trails.loadURL('http://cwhite911.github.io/RaleighGreenways/dist/dist/data/trails.geojson');

 //  var parking = L.mapbox.markerLayer()
 //    .addTo(map);

 // parking.loadURL('http://cwhite911.github.io/RaleighGreenways/dist/dist/data/parking.geojson');


map.legendControl.addLegend(document.getElementById('legend-content').innerHTML);




     </script>

      <script>
function renderChart() {

var data = d3.csv.parse(d3.select('#csv').text());
var valueLabelWidth = 40; // space reserved for value labels (right)
var barHeight = 20; // height of one bar
var barLabelWidth = 200; // space reserved for bar labels
var barLabelPadding = 5; // padding between bar and bar labels (left)
var gridLabelHeight = 18; // space reserved for gridline labels
var gridChartOffset = 3; // space between start of grid and first bar
var maxBarWidth = 420; // width of the bar with the max value
 
// accessor functions 
var barLabel = function(d) { return d['TRAIL_NAME']; };
var barValue = function(d) { return parseFloat(d['SHAPE_LEN']); };
 
// sorting
var sortedData = data.sort(function(a, b) {
  return d3.ascending(barValue(a), barValue(b)); 
}); 

// scales
var yScale = d3.scale.ordinal().domain(d3.range(0, sortedData.length)).rangeBands([0, sortedData.length * barHeight]);
var y = function(d, i) { return yScale(i); };
var yText = function(d, i) { return y(d, i) + yScale.rangeBand() / 2; };
var x = d3.scale.linear().domain([0, d3.max(sortedData, barValue)]).range([0, maxBarWidth]);
// svg container element
var chart = d3.select('#chart').append("svg")
  .attr('width', maxBarWidth + barLabelWidth + valueLabelWidth)
  .attr('height', gridLabelHeight + gridChartOffset + sortedData.length * barHeight);
// grid line labels
var gridContainer = chart.append('g')
  .attr('transform', 'translate(' + barLabelWidth + ',' + gridLabelHeight + ')'); 
gridContainer.selectAll("text").data(x.ticks(10)).enter().append("text")
  .attr("x", x)
  .attr("dy", -3)
  .attr("text-anchor", "middle")
  .text(String);
// vertical grid lines
gridContainer.selectAll("line").data(x.ticks(10)).enter().append("line")
  .attr("x1", x)
  .attr("x2", x)
  .attr("y1", 0)
  .attr("y2", yScale.rangeExtent()[1] + gridChartOffset)
  .style("stroke", "#ccc");
// bar labels
var labelsContainer = chart.append('g')
  .attr('transform', 'translate(' + (barLabelWidth - barLabelPadding) + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
labelsContainer.selectAll('text').data(sortedData).enter().append('text')
  .attr('y', yText)
  .attr('stroke', 'none')
  .attr('fill', 'black')
  .attr("dy", ".35em") // vertical-align: middle
  .attr('text-anchor', 'end')
  .text(barLabel);
// bars
var barsContainer = chart.append('g')
  .attr('transform', 'translate(' + barLabelWidth + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
barsContainer.selectAll("rect").data(sortedData).enter().append("rect")
  .attr('y', y)
  .attr('height', yScale.rangeBand())
  .attr('width', function(d) { return x(barValue(d)); })
  .attr('stroke', 'white')
  .attr('fill', 'steelblue');
// bar value labels
barsContainer.selectAll("text").data(sortedData).enter().append("text")
  .attr("x", function(d) { return x(barValue(d)); })
  .attr("y", yText)
  .attr("dx", 3) // padding-left
  .attr("dy", ".35em") // vertical-align: middle
  .attr("text-anchor", "start") // text-align: right
  .attr("fill", "black")
  .attr("stroke", "none")
  .text(function(d) { return d3.round(barValue(d), 2); });
// start line
barsContainer.append("line")
  .attr("y1", -gridChartOffset)
  .attr("y2", yScale.rangeExtent()[1] + gridChartOffset)
  .style("stroke", "#000");

}
    </script>
    <script id="csv" type="text/csv">OBJECTID,FREQUENCY,TRAIL_NAME,SHAPE_LEN
1,12,Abbotts Creek Trail,3.028605592940901
2,3,Baileywick Trail,0.594440370261524
3,13,Beaver Dam Trail,1.150425335962668
4,2,Birch Ridge Connector,0.320280816263824
5,11,Centennial Bikeway Connector,2.469068782478244
6,115,Crabtree Creek Trail,13.813296320942865
7,19,East Fork Mine Creek Trail,2.409426349278079
8,23,Edwards Mill Connector,1.334411606131223
9,14,Gardner Street Trail,0.734607800955651
10,18,Hare Snipe Creek Trail,3.261536475993400
11,21,Honeycutt Creek Trail,3.396178113361419
12,20,House Creek Trail,3.015779649310452
13,30,Little Rock Trail,1.724946655929675
14,8,Marsh Creek Trail,0.331994071099722
15,9,Martin St Connector,0.442715616298148
16,55,Mine Creek Trail,6.219989082496467
17,137,Neuse River Trail,28.308211718859006
18,13,Reedy Creek Trail,5.220481704204871
19,9,Richland Creek Trail,2.910911910105102
20,29,Rocky Branch Trail,3.727700973800349
21,5,Simms Branch Trail,1.730525967444121
22,6,Snelling Branch Trail,0.852693586166423
23,2,Spring Forest Trail,0.447076094129497
24,5,Wakefield Trail,1.441049053959240
25,109,Walnut Creek Trail,16.371203608641895</script>
    <script>renderChart();</script>
  </body>
</html>
