<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>Raliegh Greenways</title>

    <!-- Bootstrap core CSS -->
   <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap-theme.min.css">
<link href='//api.tiles.mapbox.com/mapbox.js/v1.4.2/mapbox.css' rel='stylesheet' />
<link rel="stylesheet" href="../RaleighGreenways/dist/L.GeoSearch-master/src/css/l.geosearch.css" />
<link rel="stylesheet" href="../RaleighGreenways/dist/DataTables-1.9.4/media/css/jquery.dataTables.css" />

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <style>#map { width:1100px; height:500px; }</style>
    <style type='text/css'>
    .my-legend .legend-title {
      text-align: left;
      margin-bottom: 8px;
      font-weight: bold;
      font-size: 90%;
      }
    .my-legend .legend-scale ul {
      margin: 0;
      padding: 0;
      float: left;
      list-style: none;
      }
    .my-legend .legend-scale ul li {
      display: block;
      float: left;
      width: 50px;
      margin-bottom: 6px;
      text-align: center;
      font-size: 80%;
      list-style: none;
      }
    .my-legend ul.legend-labels li span {
      display: block;
      float: left;
      height: 15px;
      width: 50px;
      }
    .my-legend .legend-source {
      font-size: 70%;
      color: #999;
      clear: both;
      }
    .my-legend a {
      color: #777;
      }
  </style>
  </head>

  <body>
    <div class="container">

      <!-- Static navbar -->
      <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Explore Raleigh</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">About</a></li>
            <li><a href="#con">Status Map</a></li>
            <li><a href="#dist">Distance Chart</a></li>
            <li><a href="http://www.arcgis.com/apps/ElevationsProfile/index.html?appid=3e5a67dd3ebd4b4b9c260cb05e105d46" target="_blank">Elevation Profiles</a></li> 
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="http://www.raleighnc.gov/arts/content/PRecDesignDevelop/Articles/CapitalAreaGreenwayTrailSystem.html" target="_blank">City of Raleigh Parks and Rec</a></li>
                <li><a href="https://github.com/cwhite911/RaleighGreenways" target="_blank">GitHub</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="http://ncsu.edu/" target="_blank">NCSU</a></li>
            <li><a href="http://www.courses.ncsu.edu/gis515/lec/001/" target="_blank">GIS 515</a></li>
            <li><a href="http://www.courses.ncsu.edu/gis515/lec/001/Project3.htm" target="_blank">Project 3</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>

     
      <div id='about'>
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner">
        <div class="item active">
          <img src="http://farm4.staticflickr.com/3532/3881720191_15ab5ff109_b.jpg" width="1500" height="350" alt="On Raleigh's greenway near Dorthea Dix Hospital">
          <div class="container">
            <div class="carousel-caption">
             <h1>EXPLORE RALEIGH</h1>
        <p>Leave the car at home and see all that Raleigh has to offer with its greenways.</p>
        <p>
          <a class="btn btn-lg btn-primary" href="../../components/#navbar" role="button">Find a Greenway &raquo;</a>
        </p>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="http://farm3.staticflickr.com/2431/3874657734_f066e75a09_b.jpg" width="1500" height="350" alt="Second slide">
          <div class="container">
            <div class="carousel-caption">
              <h1>Elevation Profiles</h1>
              <p>Discover each trail and it topography using this interactive elevation profile map!</p>
              <p><a class="btn btn-lg btn-primary" href="http://www.arcgis.com/apps/ElevationsProfile/index.html?appid=3e5a67dd3ebd4b4b9c260cb05e105d46" role="button">Learn more</a></p>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="http://farm3.staticflickr.com/2673/3882431022_ea8e7b9400_b.jpg" width="1500" height="350" alt="Wacky tree grows into itself on Raleighs greenway near Capital Blvd">
          <div class="container">
            <div class="carousel-caption">
              <h1>One more for good measure.</h1>
              <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <p><a class="btn btn-lg btn-primary" href="#" role="button">Browse gallery</a></p>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
    </div><!-- /.carousel -->


      <!--   <ul class="list-inline">
        <li><span><a href="http://www.flickr.com/photos/kbgrimes/3874657734/" title="Raleigh's Greenway by kbgrimes, on Flickr"><img src="http://farm3.staticflickr.com/2431/3874657734_922db8a54e.jpg" width="500" height="332" alt="Raleigh's Greenway"></a></span></li>
        <li><span>"The Capital Area Greenway System is a network of public open spaces and recreational trails which provides for activities such as walking, jogging, hiking, bird watching, nature study, fishing, picnicking and outdoor fun. The trails connect many of Raleigh's parks and in many cases provide a complement to the recreational activities at the parks. Many of the city's major ecological features can be experienced in their natural state along the Greenway. A major goal of the Greenway Program is to establish a closed network of interconnected trails."<a href="http://www.raleighnc.gov/arts/content/PRecDesignDevelop/Articles/CapitalAreaGreenwayTrailSystem.html" target="_blank"><p class="text-muted">City of Raleigh</p></a></span></li>
      </ul> -->
      </div><br/>
      <div id="con"><h1>Status Map</h1><a href="#" class="btn btn-default btn-xs active" role="button">Return to Top</a></div><br/>
    <div id='map' class='dark'></div>
    <br />
    <div id='dist'><h1>Distance Graph (Miles)</h1><a href="#" class="btn btn-default btn-xs active" role="button">Return to Top</a><div><br />
<div id="chart"></div><br/>
 <div id="table">
  <h1>Discover Your Greenway</h1>
    <table id="datatable" class="table table-striped"></table>
 </div> 

<div id='legend-content' style='display: none;'>
  <div class='my-legend'>
  <div class='legend-title'>Greenways</div>
  <div><span style='color:#00CC00; font-size:16px;'><strong>&mdash;</strong> Existing</div></br>
  <div><span style='color:#FF0000; font-size:16px;'><strong>&ndash; &ndash;</strong> Under Construction</div></br>
  <div><span style="color:#FF7400; font-size:24;"><strong>&bull;</strong> Parking</div><br />
  <div class='legend-source'>Aurthor: <a href="https://github.com/cwhite911/RaleighGreenways">Corey White</a></div>
  <div class='legend-source'>Data: 11/19/2013</div>
  <div class='legend-source'>Data Source: <a href="http://www.raleighnc.gov/business/content/ITechAdmin/Articles/GeographicInformationServices.html">City of Raleigh</a></div>
  </div>
    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
    <script src='//api.tiles.mapbox.com/mapbox.js/v1.4.2/mapbox.js'></script>
    <script src="http://d3js.org/d3.v2.min.js"></script>
    <script src="../RaleighGreenways/dist/L.GeoSearch-master/src/js/l.control.geosearch.js"></script>
    <script src="../RaleighGreenways/dist/L.GeoSearch-master/src/js/l.geosearch.provider.openstreetmap.js"></script>
    <script src="../RaleighGreenways/dist/DataTables-1.9.4/media/js/jquery.dataTables.js"></script>
    <script src="../RaleighGreenways/dist/dist/data/parkingdata.geojson"></script>
    

     <script type="text/javascript">

        var map = L.mapbox.map('map', 'ctwhite.gak10i1l');
        L.control.scale().addTo(map);

//Geocoder

        new L.Control.GeoSearch({
    provider: new L.GeoSearch.Provider.OpenStreetMap(),
    position: 'topcenter',
    showMarker: true
}).addTo(map);

//Marker to Point
function locationPoints (feature, latlng) {
   return L.circleMarker(latlng, {
    fillColor: '#FF7400',
    radius: 4,
    color: '#FFB273',
    weight: 1,
    fillOpacity: 1
  });
}

//Style setup
       function greenwayStyle(feature) {
          switch (feature.properties.STATUS) {
            case 'Existing': return {color: "#00CC00","weight": 2,"opacity": 0.65};
            case 'Under Construction': return {color: "#FF0000","weight": 2,"opacity": 0.65, dashArray: '3'};
          }
      }

//Popup set up
      function greenwayPopUp(feature, layer) {
  layer.bindPopup('<h2><strong>Info</strong></h2><strong>Trail Name: </strong>' + feature.properties.TRAIL_NAME + '<br />' + '<strong>Status: </strong>' + feature.properties.STATUS);
}

function parkingPopUp(feature, layer) {
  layer.bindPopup('<h2><strong>Info</strong></h2><strong>Type: </strong>' + feature.properties.TYPE + '<br />' + '<strong>Status: </strong>' + feature.properties.STATUS + '<br />' + '<strong>Address: </strong>' + feature.properties.ADDRESS + '<br />' + '<strong>Directions: </strong>' + feature.properties.DIRECTIONS);
}


$.ajax({
    type: "GET",
    url: 'http://cwhite911.github.io/RaleighGreenways/dist/dist/data/trails.geojson',
    dataType: 'json',
    success: function (response) {

        var greenway = L.geoJson(response, {
            style: greenwayStyle,
            onEachFeature: greenwayPopUp
        }).addTo(map);
    }
});

        //setup parking geojson
       
$.ajax({
    type: "GET",
    url: 'http://cwhite911.github.io/RaleighGreenways/dist/dist/data/parking.geojson',
    dataType: 'json',
    success: function (response) {

        var parking = L.geoJson(response, {
           pointToLayer: locationPoints,
           onEachFeature:parkingPopUp
        }).addTo(map);
    }
});
//         var trails = L.mapbox.markerLayer()
//     .addTo(map);

// trails.loadURL('http://cwhite911.github.io/RaleighGreenways/dist/dist/data/trails.geojson');

  var parkingdata = L.mapbox.markerLayer();

 parkingdata.loadURL('http://cwhite911.github.io/RaleighGreenways/dist/dist/data/parking.geojson');


map.legendControl.addLegend(document.getElementById('legend-content').innerHTML);

alert(parkingdata._layers[129].feature.properties.ADDRESS);

var data = [];
    for(each in parkingdata._layers){
      var address = parkingdata._layers[each].feature.properties.ADDRESS;
      var bwtst = parkingdata._layers[each].feature.properties.BETWEEN_ST;
      var directions = parkingdata._layers[each].feature.properties.DIRECTIONS;
      var status = parkingdata._layers[each].feature.properties.STATUS;
      
      data.push([address, bwtst, directions, status]);

      $(document).ready(function() {
          $('#datatable').dataTable( {
              "aaData": data,
        "bProcessing":true,
        "bDeferRender": true,
        "bRetrieve": true,
        "iDisplayLength": 10,
              "aoColumns": [
            { "sTitle": "Address"},
            { "sTitle": "Between Street" },
            { "sTitle": "Directions" },
            { "sTitle": "Status" }
        ]
          } );
      } );

}


     </script>

      <script>
function renderChart() {

var data = d3.csv.parse(d3.select('#csv').text());
var valueLabelWidth = 40; // space reserved for value labels (right)
var barHeight = 20; // height of one bar
var barLabelWidth = 200; // space reserved for bar labels
var barLabelPadding = 5; // padding between bar and bar labels (left)
var gridLabelHeight = 18; // space reserved for gridline labels
var gridChartOffset = 3; // space between start of grid and first bar
var maxBarWidth = 420; // width of the bar with the max value
 
// accessor functions 
var barLabel = function(d) { return d['TRAIL_NAME']; };
var barValue = function(d) { return parseFloat(d['SHAPE_LEN']); };
 
// sorting
var sortedData = data.sort(function(a, b) {
  return d3.ascending(barValue(a), barValue(b)); 
}); 

// scales
var yScale = d3.scale.ordinal().domain(d3.range(0, sortedData.length)).rangeBands([0, sortedData.length * barHeight]);
var y = function(d, i) { return yScale(i); };
var yText = function(d, i) { return y(d, i) + yScale.rangeBand() / 2; };
var x = d3.scale.linear().domain([0, d3.max(sortedData, barValue)]).range([0, maxBarWidth]);
// svg container element
var chart = d3.select('#chart').append("svg")
  .attr('width', maxBarWidth + barLabelWidth + valueLabelWidth)
  .attr('height', gridLabelHeight + gridChartOffset + sortedData.length * barHeight);
// grid line labels
var gridContainer = chart.append('g')
  .attr('transform', 'translate(' + barLabelWidth + ',' + gridLabelHeight + ')'); 
gridContainer.selectAll("text").data(x.ticks(10)).enter().append("text")
  .attr("x", x)
  .attr("dy", -3)
  .attr("text-anchor", "middle")
  .text(String);
// vertical grid lines
gridContainer.selectAll("line").data(x.ticks(10)).enter().append("line")
  .attr("x1", x)
  .attr("x2", x)
  .attr("y1", 0)
  .attr("y2", yScale.rangeExtent()[1] + gridChartOffset)
  .style("stroke", "#ccc");
// bar labels
var labelsContainer = chart.append('g')
  .attr('transform', 'translate(' + (barLabelWidth - barLabelPadding) + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
labelsContainer.selectAll('text').data(sortedData).enter().append('text')
  .attr('y', yText)
  .attr('stroke', 'none')
  .attr('fill', 'black')
  .attr("dy", ".35em") // vertical-align: middle
  .attr('text-anchor', 'end')
  .text(barLabel);
// bars
var barsContainer = chart.append('g')
  .attr('transform', 'translate(' + barLabelWidth + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
barsContainer.selectAll("rect").data(sortedData).enter().append("rect")
  .attr('y', y)
  .attr('height', yScale.rangeBand())
  .attr('width', function(d) { return x(barValue(d)); })
  .attr('stroke', 'white')
  .attr('fill', 'steelblue');
// bar value labels
barsContainer.selectAll("text").data(sortedData).enter().append("text")
  .attr("x", function(d) { return x(barValue(d)); })
  .attr("y", yText)
  .attr("dx", 3) // padding-left
  .attr("dy", ".35em") // vertical-align: middle
  .attr("text-anchor", "start") // text-align: right
  .attr("fill", "black")
  .attr("stroke", "none")
  .text(function(d) { return d3.round(barValue(d), 2); });
// start line
barsContainer.append("line")
  .attr("y1", -gridChartOffset)
  .attr("y2", yScale.rangeExtent()[1] + gridChartOffset)
  .style("stroke", "#000");

}
    </script>
    <script id="csv" type="text/csv">OBJECTID,FREQUENCY,TRAIL_NAME,SHAPE_LEN
1,12,Abbotts Creek Trail,2.9
2,3,Baileywick Trail,0.6
3,13,Beaver Dam Trail,0.8
4,2,Birch Ridge Connector,0.3
5,11,Centennial Bikeway Connector,2.3
6,115,Crabtree Creek Trail,14.6
7,19,East Fork Mine Creek Trail,2.5
8,23,Edwards Mill Connector,1.3
9,14,Gardner Street Trail,0.7
10,18,Hare Snipe Creek Trail,2.3
11,21,Honeycutt Creek Trail,3.8
12,20,House Creek Trail,2.8
13,30,Little Rock Trail,1.6
14,8,Marsh Creek Trail,0.3
15,9,Martin St Connector,0.4
16,55,Mine Creek Trail,4.1
17,137,Neuse River Trail,27.5
18,13,Reedy Creek Trail,5.0
19,9,Richland Creek Trail,3.1
20,29,Rocky Branch Trail,3.8
21,5,Simms Branch Trail,1.7
22,6,Snelling Branch Trail,0.8
23,2,Spring Forest Trail,0.4
24,5,Wakefield Trail,1.4
25,109,Walnut Creek Trail,15.6</script>
    <script>renderChart();</script>
  </body>
</html>
